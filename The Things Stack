

    Creado por Usuario desconocido (rudolfs), actualizado por Ãºltima vez por Deniss M. el abr 01, 2025 4 min de lectura

    Selecting a region
    Registering gateway
    UDP protocol gateway registration
        UDP scenario RouterOS settings
    LNS and CUPS protocol gateway registration
        LNS scenario RouterOS settings
        CUPS scenario RouterOS settings
    Verification

Selecting a region

The Things Stack is a new version of The Things network.


Choose your region and login with The Things network account or other credentials.
Registering gateway

Once logged in, navigate to "Go to gateways":



Register a gateway by clicking on the "+ Register gateway" button:

UDP protocol gateway registration

Fill in the blank spaces. Input Gateway EUI. Make sure to select a correct frequency plan. Do not enable "Require authenticated connection" option (it is used for LNS and CUPS)!



In RouterOS, Gateway EUI value can be found under "IoT>LoRa>Devices>Gateway ID"):

For additional information check their documentation page.
UDP scenario RouterOS settings

Double-check that the correct TTN server is selected by the LoRa device (in RouterOS) and that the server setting uses "UDP" protocol:

LNS and CUPS protocol gateway registration

Fill in the blank spaces. Input Gateway EUI. Make sure to select a correct frequency plan. Enable "Require authenticated connection" and the follow-up (for LNS) "Generate API key for LNS" and (for CUPS) "Generate API key for CUPS" options:

In RouterOS, Gateway EUI value can be found under "IoT>LoRa>Devices>Gateway ID":

After clicking on "Register gateway" button, you should be prompted to download the keys. Download them.

To view LNS and CUPS keys, inspect download files. LNS key should also be visible under the "LoRa Basics Station LNS authentication Key" field:


For additional information check their documentation page.
LNS scenario RouterOS settings

Make sure that the correct TTN server is selected, that the correct port is configured (TTN expects LNS over 8887), that LNS protocol is chosen, that the LNS key (from the "LoRa Basics Station LNS authentication Key" field) is input and that "SSL" checkbox is enabled:

The last step is to download and import Root Certificates. The page has links to the required file.

After the certificate file was downloaded, drag and drop it into the RouterOS file menu and import the certificate list:

This should make the certificate list trusted:

CUPS scenario RouterOS settings

Make sure that the correct TTN server is selected, that the correct port is configured (TTN expects CUPS over 443), that CUPS protocol is chosen, that the CUPS key is input (obtained from the download cups.key file during gateway registration step) and that "SSL" checkbox is enabled:

The last step is to download and import Root Certificates. The page has links to the required file.

After the certificate file was downloaded, drag and drop it into the RouterOS file menu and import the certificate list:

This should make the certificate list trusted:

Verification

If everything is configured in correctly, right after you enable the LoRa interface in RouterOS ("IoT>LoRa>Devices>Enable"):

You should see the gateway connection "Live data" update:

